<H1>MFCSQLite3Demo</H1>

<b>Example1.zip</b><br>

В данный момент реализовано:<br>
<ul>
<li>подключение к БД Chinook.db;</li>
<li>просмотр данных в окне представления с прокруткой;</li>
<li>выбор таблиц из меню;</li>
<li>используется архитектура документ/вид.</li>
</ul>

пс. база Chinook.db, файлы SQLite3 и обертка под MFC уже есть в архиве Example1.zip
проект создавался с использованием среды разработки Visual Studio 2012-2015.<br>

что такое <b>Chinook</b>? это база данных некого цифрового медиа хранилища 
см по ссылкам:<br>
https://chinookdatabase.codeplex.com/<br>
http://www.sqlitetutorial.net/sqlite-sample-database/<br>
https://blog.xojo.com/2016/04/13/the-chinook-sample-database/<br>

ссылка на саму обертку SQLite3 под MFC (автор <b>midnightEngineer</b>):<br>
https://www.codeproject.com/Articles/10060/SQLite-MFC-Wrapper<br>

----------------------------------------------------------------------------
update1 (<b>Example1.1.zip</b>) реализовано:<br>
<ul>
<li>страничный просмотр данных, юзал не сильно мудреный сиквел:</li>
SELECT * FROM table LIMIT 50 OFFSET n;<br>
<li>навигация при помощи меню, кнопок на тулбаре, а также кнопок на вьюшке под таблицей с выборкой данных.</li>
 </ul>

пс. если что-то будет удаляться из предыдущих версий примера, то это будет указано.

----------------------------------------------------------------------------
update2 (<b>Example1.2.zip</b>) реализовано:<br>
<ul>
<li>сортировка</li>
SELECT * FROM table ORDER BY field LIMIT 50 OFFSET n;<br>
<li>выбор сортировки через комбо-список, расположенном на тулбаре.</li>
 </ul>

<p><i><b>обнаружен косяк!</b> замедление работы при сортировке больших данных, видимо запрос на получение всех данных даже с учетом лимита не эффективен и данные всеравно получаются все в память! 
буду пробовать решить через добавление ограничения запроса WHERE:</i><br>
SELECT * FROM table WHERE field = 'value' ORDER BY field LIMIT 50 OFFSET n;</p>

----------------------------------------------------------------------------
update3 (<b>Example2.zip</b>):
<ul>
<li>сделан рефакторинг кода;</li>
<li>исправлен косяк см выше.</li>

</ul>
<p><b>причина</b>: медленная отрисовка данных. вывод данных непосредствено из запроса, что приводило к зависанию при большом числе записей в таблице.<br> 
<b>решение</b>: вывод данных во вьюшку не напрямую из запроса, а предварительно загружаясь в кэш.</p>

----------------------------------------------------------------------------
update4 (<b>Example2.1.zip</b>):
<ul>
<li>упорядочены поля;</li>
<li>убраны магические числа в полях;</li>
<li>исправлена сортировка в связи с новым форматом запросов.</li>
<li>удалены из меню Tables таблицы playlist_track и invoice_items, которые организуют множественную связь между таблицами playlists - tracks и invoices - tracks </li>
</ul>
<p>для этого юзал 11 запросов SELECT с LEFT JOIN вида:<br>
SELECT al.albumId, al.title, ar.name FROM albums al
LEFT JOIN artists ar ON al.artistid = ar.artistid
		ORDER BY %d ASC LIMIT %d OFFSET %d</p>

----------------------------------------------------------------------------
update5 (<b>Example2.2.zip</b>):
<ul>
<li>реализовано отслеживание положения мыши для выбора элемента выводимых данных из таблицы;</li>
</ul>
<p>пока все! :D <br>
данный подход будет еще подвержен рефакторингу;<br>
для его реализации юзался революционый поход основанный на интуиции :D</p>

----------------------------------------------------------------------------
update6 (<b>Example2.3.zip</b>):
<ul>
<li>готовы два диалога Customer и Album</li>
</ul>
<p>пока они тока отображают данные без возможности сохранения и других необходимых операций.<br>
это все в будующем :)<br>
Кроме того в диалоге Album пока не реализовано отображение списка треков, тоже в будущем все будет :)<br>

Чтобы увидеть нужный диалог используйте клик по строке в данными, революционый подход распознает что вам надо! :D<br>

Изначальный вариант с 50 кнопками на вьшке потерпел фиаско и признан утопией! :D</p>

----------------------------------------------------------------------------
update7 (<b>Example2.4.zip</b>):
<ul>
<li>добавлен еще один диалог Artist</li>
<li>сделан рефакторинг кода, в частности переделан код вывода сетки во вьшку (см класс CExample2View)</li>
</ul>
<p>на данном этапе показано уже много чего, например обратите внимание на программирование диалогов<br>
особое внимание обратите на SQL код, они оформлены как внешние переменные, перед их использованием они были тщательно протестированы в консоли SQLite (sqlite3.exe)</p>

----------------------------------------------------------------------------
update8 (<b>Example2.5.zip</b>):
<ul>
<li>добавлены два диалога Tracks, Playlists</li>
<li>сделан рефакторинг кода, переделана часть код отвечающая за создание и вывод на экран диалогов (был применен "обобщенный конструктор")</li>
</ul>
<p>были также обнаружены и исправлены несколько багов связанных с запросами SQL.</p>

----------------------------------------------------------------------------
update9 (<b>Example2.6.zip</b>):
<ul>
<li>сделан рефакторинг кода: "обобщенный конструктор" заменен на "фабричный метод" (factory method)</li>
</ul>

----------------------------------------------------------------------------
update10 (<b>Example2.7.zip</b>):
<ul>
<li>все основные диалоги добавлены</li>
</ul>

----------------------------------------------------------------------------
update 11 (<b>Example2.8.zip</b>):
<ul>
<li>рефакторинг класса CCustomDlg, функция InitDialog теперь не чисто виртуальная</li>
<li>добавлен класс CNumericFormattedEdit для отображения чисел с разделителями, он используется для подкласса эдитов mMillisecondsEdit и mBytesEdit в диалоге CTrackDlg</li>
</ul>

----------------------------------------------------------------------------
update 12 (<b>Example 2.9.zip</b>) добавлено:
<ul>
<li>возможность сортировки по клику на заголовке таблицы</li>
<li>индикация сортировки</li>
</ul>
<p>продолжение следует... </p>

----------------------------------------------------------------------------
<b>Gallery1.zip</b><br>
<b>Gallery1.1.zip</b><br>
<b>Gallery1.2.zip</b><br>
В качесте разминки добавил небольшое демо <b>Gallery</b> в нем есть пример программирования SQL INSERT, UPDATE, DELETE, CREATE TABLE, а также работа с изображениями. Пример еще не закончен, надо будет добавить вывод изображения в отдельное окно по клику.

при кодировании этого примера обнаружил баг в коде обертки от мистера <b>midnightEngineer</b>
ошибка проявлялась при передаче юникодных строк в функцию Bind класса DbSQLite, баг убрал.
